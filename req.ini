# AutoTex（LaTeX智能排版专家）
## 一、 项目大体介绍
### 1. 项目目标
	我们写论文一般用word或者markdown更顺手，但是如果要投一些顶刊或者做毕设的话就不得不下载对应模版并用Latex进行论文排版。
我希望我们的Agent能够识别我的以word/Txt/markdown格式的论文，把它转化为符合要求的Latex论文排版。
所以
**输入**：以word/Txt/markdown格式的论文、希望发表的期刊类型
**输出**：含有完整排版的Latex文件压缩包
数据库/知识库中需要预设各种类型期刊的Latex模版![deepseek_mermaid_20251114_d3f74e.png](https://docimg6.docs.qq.com/image/AgAABfPIDdvWiU6jQbxL77o_tYTsaMEY.png?w=1797&h=2995)

### 2.项目链接
[MILK-BIT/AutoLatex at original](https://github.com/MILK-BIT/AutoLatex/tree/original)
**目前original分支中为最新的**

## 二、任务分配
#### **第一周（11.14-11.21）：奠基与架构**

**目标**：确定技术栈，**搭建 `CrewAI` 基础框架**，完成核心工具链，启动数据合成。

| 成员 | 核心任务（独立负责） | 共同任务 |
| :--- | :--- | :--- |
| **A同学**（李奕佳） | **模块一：AI 团队架构师与 CrewAI 编排**<br>- **学习并掌握 `CrewAI` 核心概念（Agent, Task, Tool, Crew）。**<br>- **设计 `AutoLaTeX` 团队的 Agent 角色与 Task 流程。** 、<br>- **负责核心 `Crew` 的主体代码编写与 Prompt 工程。**<br>- **定义并封装所有 Agent 需要调用的 `Tool` 接口。** *(解读：A同学现在是“接口定义者”，负责告诉B、D同学需要什么样的工具函数)* | 1. **主持**系统架构设计评审。<br>2. 共同搭建 Python 后端环境（**推荐使用 FastAPI**）。<br>3. 共同开发基础工具函数。 |
| **B同学**（黄本可）| **模块二：核心工具提供者**<br>- 实现高性能Word/Markdown文档解析器，输出结构化JSON（**根据 A 同学定义的接口**，实现 `parse_document` Python 函数）<br>- 搭建安全的DockerLaTex编译沙盒环境（**根据 A 同学定义的接口**，实现 `compile_latex` Python 函数（包含 Docker 沙箱））。<br>- 构建期刊模板文件管理系统，并提供简单的文件读取函数接口。 | *(共同任务不变)* |
| **C同学**（丁予晴）| **模块三：数据合成流水线**<br>- 部署DeepSeek-OCR API编写批量调用脚本<br>- 开发“研究员”智能体，批量生成多样化伪论文。<br>- 启动“排版专家”智能体，开始合成训练数据。 | *(共同任务不变)* |
| **D同学**（白钦宇）| **模块四：记忆与交互层**<br>- 部署向量数据库，**并根据 A 同学定义的接口**，实现 `knowledge_base_search` 函数。<br>- 使用 Gradio/Streamlit 开发功能完整的 Web UI。<br>- **与 A 同学共同定义**前端与 FastAPI 后端的 API 通信协议。 |（共同任务不变） |
**第1.5周里程碑：中期汇报（11.24）**
- **汇报形式**：
组长自己做PPT
关注整体流程与逻辑、初步结果
 目前打算从项目介绍、分工、目前进展三个方面做

#### **第二周（11.22-11.29）：核心实现与蒸馏**

**目标**：完成各模块的深度开发，**将所有工具无缝集成到 `Crew` 中**，启动模型训练。

| 成员 | 核心任务（独立负责） | 共同任务 |
| :--- | :--- | :--- |
| **A同学** | **深化模块一**<br>- **将 B 同学和 D 同学提供的所有工具函数，正式集成到 `CrewAI` 的 `Agent` 中。**<br>- **调试 `Crew` 的完整执行流程**，处理 Agent 之间信息传递不畅、工具调用失败等问题。<br>- 优化 `Task` 的描述和 `Agent` 的 Prompt，提升协作效率。 | 1. **主导**代码审查，确保工具接口符合规范。<br>2. 共同进行系统联调与 BUG 修复。 |
| **B同学**| **深化模块二**<br>- 优化解析器，处理复杂表格和嵌套列表。<br>- **根据 A 同学在集成过程中的反馈，修复和完善工具函数的 Bug** 和边界情况。 | *(共同任务不变)* |
|**C同学**|**深化模块三** - 完成大规模数据合成，进行数据清洗和质量验证。 - 构建`(图片, LaTeX)`和`(文本, LaTeX)`配对数据集。 - **开始使用QLoRA蒸馏训练学生模型**。 | *(共同任务不变)* |
| **D同学**| **深化模块四**<br>- 在 UI 中开发实时**日志可视化**功能（**订阅并解析 A 同学后端 `Crew` 运行产生的 `verbose` 日志流**）。<br>- **根据 A 同学的反馈，完善知识库检索工具**。<br>- 优化前端用户体验。 | *(共同任务不变)* |

### **第三周（11.28-12.5）：混合模型编排与最终交付**

# 注意：这周会面临设计模式考试，尽量在第二周提前完成本周任务

**核心目标**：完成“大脑移植”（将训练好的小模型接入特定 Agent），实现 **Hybrid Crew**（混合智能体团队），保障系统鲁棒性，完成最终演示。

| 成员 | 核心任务（独立负责） | 共同任务 |
| :--- | :--- | :--- |
| **A同学**<br>*(Crew编排)* | **模块一：混合模型集成与 Crew 调优**<br>- **实施“大脑移植”**：在 `agents.yaml` 中配置 `llm` 参数，将 `LaTeX Coder Agent` 的底层模型替换为 C 同学提供的微调模型接口（如通过 Ollama 或 vLLM 调用），而保留 `Manager` 使用通用大模型。<br>- **Crew 逻辑固化**：调整 Prompt 以适应小模型的指令跟随能力（小模型可能需要更明确的少样本提示 Few-Shot）。<br>- **异常流处理**：在 `main.py` 中增加对 Crew 执行失败的兜底逻辑（Retry 机制）。 | 1. **全链路联调**：测试从“上传文档”到“生成PDF”的完整闭环。<br>2. **性能评估**：对比“纯 GPT-4 Crew”与“混合模型 Crew”的效果与成本。 |
| **B同学**<br>*(工具链)* | **模块二：工具鲁棒性与环境标准化**<br>- **工具“防呆”优化**：修改工具代码（如 `LaTeXCompilerTool`），确保在编译失败时**返回清晰的字符串错误日志**而不是直接抛出 Python 异常（这对 Agent 自我修正至关重要）。<br>- **环境打包**：如果决定使用 Docker，编写最终版 `Dockerfile`；若使用本地环境，编写详细的 `requirements.txt` 和环境配置脚本，确保演示时不翻车。<br>- **缓存机制**：为 `TemplateRetrievalTool` 等耗时工具增加缓存，提升演示速度。 | *(共同任务不变)* |
| **C同学**<br>*(模型)* | **模块三：模型服务化与评估**<br>- **模型服务化部署**：不只是提供权重文件，而是使用 **Ollama** 或 **FastAPI + vLLM** 将训练好的模型封装成兼容 OpenAI 格式的 API 接口，**供 A 同学的 Agent 调用**。<br>- **基准测试报告**：使用测试集评估微调模型在 LaTeX 生成任务上的准确率（Compile Success Rate）和 BLEU/Rouge 分数。<br>- **幻觉分析**：专门分析模型是否还会编造不存在的宏包或图片路径，并反馈给 A 同学在 Prompt 中规避。 | *(共同任务不变)* |
| **D同学**<br>*(交互)* | **模块四：可视化与演示系统**<br>- **Agent 思维链可视化**：在 Web UI 中通过 WebSocket 或轮询，实时展示 CrewAI 的 **Step-by-Step 执行过程**（例如：“正在搜索模板...”、“正在修复编译错误...”），增加演示的观赏性。<br>- **人工介入接口（Human-in-the-loop）**：(可选) 在 UI 上增加一个“人工确认”环节，允许用户在 Agent 生成代码后、编译前进行手动修改。<br>- **最终演示 PPT/视频素材**：录制系统运行的高光时刻。 | 1. **撰写技术报告**。<br>2. **准备最终 Presentation**。 |
### **最后半周（12.5-12.9）：交付相关代码与文件**

##三、 json 接口
```json
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "AutoTeX Document Structure",
  "description": "用于在AutoTeX项目模块间传递文档数据的结构定义",
  "type": "object",
  "properties": {
    "metadata": {
      "type": "object",
      "description": "文档元信息",
      "properties": {
        "title": {
          "type": "string",
          "description": "文档标题"
        },
        "authors": {
          "type": "array",
          "description": "作者列表",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string",
                "description": "作者姓名"
              },
              "affiliation": {
                "type": "string",
                "description": "作者单位"
              },
              "email": {
                "type": "string",
                "description": "作者邮箱"
              }
            },
            "required": ["name"]
          }
        },
        "abstract": {
          "type": "string",
          "description": "摘要正文"
        },
        "keywords": {
          "type": "array",
          "description": "关键词列表",
          "items": {
            "type": "string"
          }
        }
      },
      "required": ["title", "authors", "abstract"]
    },
    "content": {
      "type": "array",
      "description": "文档主体内容块序列",
      "items": {
        "oneOf": [
          {
            "type": "object",
            "properties": {
              "type": {
                "const": "heading"
              },
              "level": {
                "type": "integer",
                "minimum": 1,
                "maximum": 6,
                "description": "标题级别（1级为最高）"
              },
              "text": {
                "type": "string",
                "description": "标题文本"
              }
            },
            "required": ["type", "level", "text"]
          },
          {
            "type": "object",
            "properties": {
              "type": {
                "const": "paragraph"
              },
              "text": {
                "type": "string",
                "description": "段落文本"
              }
            },
            "required": ["type", "text"]
          },
          {
            "type": "object",
            "properties": {
              "type": {
                "const": "equation"
              },
              "format": {
                "type": "string",
                "enum": ["inline", "display"],
                "description": "行内公式或独立公式"
              },
              "latex": {
                "type": "string",
                "description": "LaTeX公式代码（如已从图片OCR识别）"
              },
              "image_path": {
                "type": "string",
                "description": "公式图片路径（如尚未识别）"
              }
            },
            "required": ["type", "format"]
          },
          {
            "type": "object",
            "properties": {
              "type": {
                "const": "table"
              },
              "caption": {
                "type": "string",
                "description": "表格标题"
              },
              "latex": {
                "type": "string",
                "description": "表格LaTeX代码（如已从图片OCR识别）"
              },
              "image_path": {
                "type": "string",
                "description": "表格图片路径（如尚未识别）"
              },
              "data": {
                "type": "array",
                "description": "表格数据（二维数组），作为OCR的备用或验证",
                "items": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              }
            },
            "required": ["type", "caption"]
          },
          {
            "type": "object",
            "properties": {
              "type": {
                "const": "figure"
              },
              "caption": {
                "type": "string",
                "description": "图标题"
              },
              "image_path": {
                "type": "string",
                "description": "图片文件路径"
              }
            },
            "required": ["type", "caption", "image_path"]
          },
          {
            "type": "object",
            "properties": {
              "type": {
                "const": "code"
              },
              "language": {
                "type": "string",
                "description": "编程语言"
              },
              "content": {
                "type": "string",
                "description": "代码内容"
              }
            },
            "required": ["type", "content"]
          },
          {
            "type": "object",
            "properties": {
              "type": {
                "const": "reference"
              },
              "marker": {
                "type": "string",
                "description": "引用标记，如 '[1]' 或 '\\cite{author2024}'"
              }
            },
            "required": ["type", "marker"]
          }
        ]
      }
    },
    "bibliography": {
      "type": "array",
      "description": "参考文献列表",
      "items": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "引用ID"
          },
          "type": {
            "type": "string",
            "description": "文献类型（article, inproceedings等）"
          },
          "authors": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "title": {
            "type": "string"
          },
          "venue": {
            "type": "string",
            "description": "期刊/会议名称"
          },
          "year": {
            "type": "string"
          },
          "raw": {
            "type": "string",
            "description": "原始参考文献文本"
          }
        },
        "required": ["id", "raw"]
      }
    }
  },
  "required": ["metadata", "content", "bibliography"]
}
```



